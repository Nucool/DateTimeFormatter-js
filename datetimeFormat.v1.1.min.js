function DatetimeFormat(){function i(c,d){var e,f,h,i=0,j=0,k=0,l=0,m="";var n="";var o="";var p=0;var q=0;while(p<d.length){n=d.charAt(p);o="";while(d.charAt(p)==n&&p<d.length){o+=d.charAt(p++)}if(o=="yyyy"||o=="yy"){if(o=="yyyy"){e=g(c,q,4,4);q+=4}else{e=g(c,q,2,2);q+=2}if(e==null){a="Invalid Year";return null}else{if(e.length==2){if(e>50)e=1900+(e-0);else e=2e3+(e-0)}}}else if(o=="MMMM"||o=="MMM"){for(var r=0;r<b.monthNames.length;r++){var s=b.monthNames[r];if(c.substring(q,q+s.length).toLowerCase()==s.toLowerCase()){f=r+1;if(f>12){f-=12}q+=s.length;break}}}else if(o=="MM"||o=="M"){f=g(c,q,1,2);if(f==null||f<1||f>12){a="Invalid Month";return null}q+=f.length}else if(o=="dddd"||o=="ddd"){for(var r=0;r<b.dayNames.length;r++){var t=b.dayNames[r];if(c.substring(q,q+t.length).toLowerCase()==t.toLowerCase()){q+=t.length;break}}}else if(o=="dd"||o=="d"){h=g(c,q,1,2);if(h==null||h<1||h>31){a="Invalid Day";return null}q+=h.length}else if(o=="HH"||o=="H"||o=="hh"||o=="h"){i=g(c,q,1,2);if(i==null||i<0||i>23){a="Invalid Hour";return null}q+=i.length}else if(o=="mm"||o=="m"){j=g(c,q,1,2);if(j==null||j<0||j>59){a="Invalid Minute";return null}q+=j.length}else if(o=="ss"||o=="s"){k=g(c,q,1,2);if(k==null||k<0||k>59){a="Invalid Second";return null}q+=k.length}else if(o=="fff"||o=="ff"||o=="f"){l=g(c,q,1,3);if(l==null||l<0||l>999){a="Invalid Milisecond";return null}q+=l.length}else if(o=="TT"||o=="T"||o=="tt"||o=="t"){m=c.substring(q,q+o.length);if(m.toLowerCase()=="am"||m.toLowerCase()=="a"){m="am"}else if(m.toLowerCase()=="pm"||m.toLowerCase()=="p"){m="pm"}else{a="Invalid AM, PM";return null}q+=m.length}else{if(c.substring(q,q+o.length)!=o){a="Incompatible Format";return null}else{q+=o.length}}}if(f==2){if(e%400==0||e%4==0&&e%100!=0){if(h>29){a="Invalid Day of February in Leap Year";return null}}else{if(h>28){a="Invalid Day of Month";return null}}}else if(f==4||f==6||f==9||f==11){if(h>30){a="Invalid Day of Month";return null}}if(i<12&&m.toLowerCase()=="pm"){i=i-0+12}else if(i>11&&m.toLowerCase()=="am"){a="Invalid Hour";return null}if(i==12&&m.toLowerCase()=="am")i=0;try{var u=new Date(e,f-1,h,i,j,k,l);return u}catch(v){a="Invalid Date";return null}}function h(a,c){var d=/[Dd]{1,4}|M{1,4}|y{1,4}|([HhmsTt])\1?|f{1,3}/g;var f=a.getDate(),g=a.getDay(),h=a.getMonth(),i=a.getFullYear(),j=a.getHours(),k=a.getMinutes(),l=a.getSeconds(),m=a.getMilliseconds(),n={d:f,dd:e(f),ddd:b.dayNames[g+7],dddd:b.dayNames[g],M:h+1,MM:e(h+1),MMM:b.monthNames[h+12],MMMM:b.monthNames[h],yy:String(i).slice(2),yyyy:i,h:j%12||12,hh:e(j%12||12),H:j,HH:e(j),m:k,mm:e(k),s:l,ss:e(l),t:j<12?"a":"p",tt:j<12?"am":"pm",T:j<12?"A":"P",TT:j<12?"AM":"PM",f:String(m).slice(2),ff:e(String(m).slice(1)),fff:m};return c.replace(d,function(a){return a in n?n[a]:a.slice(1,a.length-1)})}function g(a,b,c,d){for(var e=d;e>=c;e--){var g=a.substring(b,b+e);if(g.length<c){return null}if(f(g)){return g}}return null}function f(a){var b="0123456789";for(var c=0;c<a.length;c++){if(b.indexOf(a.charAt(c))==-1){return false}}return true}function e(a){a=String(a);if(a.length<2)a="0"+a;return a}function d(b,c){var d=i(b,c);if(d==null)throw SyntaxError(a);else return d}function c(b,c,d){if(typeof d==="undefined"){b=b?new Date(b):new Date;if(isNaN(b))throw SyntaxError("Invalid Date");else return h(b,c)}else{var e=i(b,c);if(e==null)throw SyntaxError(a);else return h(e,d)}}var a="";var b={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};this.format=c;this.toDate=d}